#!/usr/bin/perl

use strict;
use warnings;


sub match($);
sub order(@) {
	sort @_;
}
if (@ARGV) {
	my @re = map { qr/$_/ } @ARGV;
	*match=sub($){ my $a=$_; for(@re) { return 1 if $a=~$_; } return 0;};
} else {
	*match=sub($){ return 1; };
}
sub getnames() {
	return order grep { match($_) } qx{apt-cache pkgnames} ;
}

my @pkg;
@pkg=getnames();



@pkg=grep { match($_) } @pkg;
@pkg=sort @pkg;

print for @pkg;
print sprintf("%d pkgs found\n",0+@pkg) if -t STDOUT;

